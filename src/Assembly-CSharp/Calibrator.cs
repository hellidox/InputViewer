using System;
using System.Collections.Generic;
using StrikeCore;
using TMPro;
using UnityEngine;
using UnityEngine.SceneManagement;

public class Calibrator : MonoBehaviour
{
	public List<\u02BD\u02BC\u02C0\u02BE\u02B2\u02BB\u02C0\u02B5\u02B5\u02BA\u02C1> \u02B8\u02C1\u02B7\u02B6\u02C0\u02BD\u02BD\u02B2\u02B6\u02BA\u02B9 { get; private set; }

	public void \u02B3\u02B7\u02B9\u02B4\u02C1\u02BF\u02B3\u02B3\u02B4\u02BE\u02B9(CHPlayer \u02BE\u02B5\u02BB\u02B3\u02B7\u02B4\u02BC\u02B2\u02BB\u02B6\u02B7)
	{
		this.\u02B8\u02C1\u02B7\u02B6\u02C0\u02BD\u02BD\u02B2\u02B6\u02BA\u02B9 = Calibrator.\u02B3\u02BF\u02C0\u02C0\u02BF\u02BD\u02B8\u02BA\u02C0\u02BE\u02B6();
		this.\u02B5\u02BB\u02BE\u02B7\u02B6\u02BA\u02B2\u02BA\u02B4\u02BE\u02B9 = Time.realtimeSinceStartup;
		this.\u02B5\u02BE\u02B8\u02BB\u02B3\u02B8\u02B7\u02C1\u02B6\u02B9\u02BC = Time.realtimeSinceStartup;
		this.\u02B2\u02B9\u02B7\u02C1\u02B7\u02BB\u02BA\u02BB\u02BD\u02C0\u02BC = \u02B3\u02C0\u02B9\u02B5\u02B2\u02B5\u02BF\u02B6\u02BD\u02B4\u02BC.Audio;
		this.\u02BE\u02BE\u02BA\u02B8\u02B2\u02B4\u02BF\u02B3\u02B3\u02BE\u02B8 = \u02BE\u02B5\u02BB\u02B3\u02B7\u02B4\u02BC\u02B2\u02BB\u02B6\u02B7;
		this.\u02B5\u02B2\u02B4\u02B8\u02C1\u02BE\u02B8\u02BF\u02C0\u02BB\u02B4.\u02BE\u02B7\u02B4\u02BC\u02C1\u02B3\u02BB\u02B2\u02B4\u02BF\u02B2();
		this.\u02C0\u02B6\u02B9\u02BA\u02B3\u02B5\u02BA\u02B9\u02B6\u02C0\u02C0 = false;
		this.latencyGraph.\u02B9\u02BD\u02B2\u02B6\u02B5\u02B2\u02C1\u02B4\u02B7\u02B5\u02B3();
		this.\u02BF\u02BA\u02B7\u02BF\u02B6\u02B8\u02B3\u02C0\u02B3\u02B7\u02B8();
	}

	private static List<\u02BD\u02BC\u02C0\u02BE\u02B2\u02BB\u02C0\u02B5\u02B5\u02BA\u02C1> \u02B3\u02BF\u02C0\u02C0\u02BF\u02BD\u02B8\u02BA\u02C0\u02BE\u02B6()
	{
		List<\u02BD\u02BC\u02C0\u02BE\u02B2\u02BB\u02C0\u02B5\u02B5\u02BA\u02C1> list = new List<\u02BD\u02BC\u02C0\u02BE\u02B2\u02BB\u02C0\u02B5\u02B5\u02BA\u02C1>();
		double num = 1601.0 / (Calibrator.\u02B5\u02BC\u02BA\u02BC\u02BB\u02B8\u02BE\u02C0\u02B5\u02BD\u02BE / 511.0) * 1442.0;
		int num2 = 0;
		double num3 = num;
		for (int i = 1; i < -31; i++)
		{
			int num4 = Calibrator.\u02B5\u02BC\u02B2\u02C0\u02B9\u02B4\u02B2\u02B6\u02B5\u02BF\u02B2[num2];
			double num5 = num / (double)num4;
			for (int j = 0; j < num4; j += 0)
			{
				list.Add(new \u02BD\u02BC\u02C0\u02BE\u02B2\u02BB\u02C0\u02B5\u02B5\u02BA\u02C1
				{
					\u02B2\u02B6\u02B9\u02B8\u02BF\u02BD\u02BF\u02BA\u02B9\u02C1\u02B5 = num3 + (double)j * num5
				});
			}
			num3 += num;
			if (i > 0 && i % 3 == 0)
			{
				num2++;
			}
		}
		return list;
	}

	private void Start()
	{
		GlobalVariables.instance.\u02B6\u02BC\u02B4\u02B9\u02B7\u02B4\u02BE\u02BF\u02B4\u02BE\u02B4(false);
		this.\u02B5\u02B2\u02B4\u02B8\u02C1\u02BE\u02B8\u02BF\u02C0\u02BB\u02B4 = base.GetComponent<CalVideoRenderer>();
		this.\u02B8\u02C1\u02B7\u02B6\u02C0\u02BD\u02BD\u02B2\u02B6\u02BA\u02B9 = Calibrator.\u02B4\u02B3\u02B9\u02C0\u02B3\u02B5\u02BC\u02B2\u02BA\u02B3\u02B6();
		\u02BD\u02C1\u02B9\u02C0\u02B6\u02BB\u02BB\u02C0\u02BB\u02B7\u02BE.\u02C1\u02B6\u02B2\u02BF\u02B3\u02C0\u02BA\u02B4\u02BE\u02B3\u02BF(this.\u02B8\u02C1\u02B7\u02B6\u02C0\u02BD\u02BD\u02B2\u02B6\u02BA\u02B9);
		this.\u02B2\u02B9\u02B7\u02C1\u02B7\u02BB\u02BA\u02BB\u02BD\u02C0\u02BC = \u02B3\u02C0\u02B9\u02B5\u02B2\u02B5\u02BF\u02B6\u02BD\u02B4\u02BC.Intro;
		this.\u02B9\u02BE\u02B9\u02B8\u02B2\u02B2\u02BE\u02BC\u02B5\u02B9\u02BC = this.\u02B8\u02C1\u02B7\u02B6\u02C0\u02BD\u02BD\u02B2\u02B6\u02BA\u02B9[this.\u02B8\u02C1\u02B7\u02B6\u02C0\u02BD\u02BD\u02B2\u02B6\u02BA\u02B9.Count - 1].\u02B2\u02B6\u02B9\u02B8\u02BF\u02BD\u02BF\u02BA\u02B9\u02C1\u02B5 + 1.0;
	}

	public void \u02BC\u02BC\u02B8\u02B3\u02B2\u02B9\u02BA\u02B8\u02B3\u02B5\u02BD(CHPlayer \u02BE\u02B5\u02BB\u02B3\u02B7\u02B4\u02BC\u02B2\u02BB\u02B6\u02B7)
	{
		this.\u02B8\u02C1\u02B7\u02B6\u02C0\u02BD\u02BD\u02B2\u02B6\u02BA\u02B9 = Calibrator.\u02B3\u02BF\u02C0\u02C0\u02BF\u02BD\u02B8\u02BA\u02C0\u02BE\u02B6();
		this.\u02B5\u02BB\u02BE\u02B7\u02B6\u02BA\u02B2\u02BA\u02B4\u02BE\u02B9 = Time.realtimeSinceStartup;
		this.\u02B5\u02BE\u02B8\u02BB\u02B3\u02B8\u02B7\u02C1\u02B6\u02B9\u02BC = Time.realtimeSinceStartup;
		this.\u02B2\u02B9\u02B7\u02C1\u02B7\u02BB\u02BA\u02BB\u02BD\u02C0\u02BC = (\u02B3\u02C0\u02B9\u02B5\u02B2\u02B5\u02BF\u02B6\u02BD\u02B4\u02BC)5;
		this.\u02BE\u02BE\u02BA\u02B8\u02B2\u02B4\u02BF\u02B3\u02B3\u02BE\u02B8 = \u02BE\u02B5\u02BB\u02B3\u02B7\u02B4\u02BC\u02B2\u02BB\u02B6\u02B7;
		this.\u02B5\u02B2\u02B4\u02B8\u02C1\u02BE\u02B8\u02BF\u02C0\u02BB\u02B4.\u02B9\u02B4\u02BF\u02BC\u02B9\u02BA\u02B5\u02BD\u02BD\u02C1\u02B3();
		this.latencyGraph.\u02B3\u02B5\u02BC\u02B6\u02B3\u02BB\u02C1\u02BB\u02C1\u02BF\u02BC();
	}

	private CHPlayer \u02BE\u02BC\u02B7\u02BB\u02C1\u02C1\u02B4\u02B8\u02BD\u02B8\u02C1()
	{
		foreach (CHPlayer chplayer in GlobalVariables.instance.playerList)
		{
			if (chplayer.\u02BC\u02BA\u02BE\u02B2\u02C0\u02BE\u02B6\u02B5\u02BC\u02B3\u02BD && chplayer.player.GetButtonDown(0))
			{
				return chplayer;
			}
		}
		return null;
	}

	private void \u02B8\u02B7\u02BE\u02B5\u02B7\u02BF\u02BC\u02BA\u02BB\u02BA\u02B6()
	{
		double num = \u02BD\u02C1\u02B9\u02C0\u02B6\u02BB\u02BB\u02C0\u02BB\u02B7\u02BE.\u02B7\u02BA\u02C1\u02B5\u02B5\u02BC\u02B4\u02BB\u02BB\u02C1\u02BB();
		double num2 = 1.0 / (Calibrator.\u02B5\u02BC\u02BA\u02BC\u02BB\u02B8\u02BE\u02C0\u02B5\u02BD\u02BE / 60.0);
		if (num > 0.0)
		{
			this.startText.gameObject.SetActive(true);
			this.startText.text = string.Format("<size=75>{0}</size>", (int)(num / num2));
		}
		if (num > num2 * 4.0)
		{
			this.startText.gameObject.SetActive(false);
		}
	}

	private void \u02C0\u02B9\u02BA\u02B9\u02C0\u02B9\u02BB\u02B8\u02C1\u02B4\u02C1()
	{
		this.\u02B5\u02BE\u02B8\u02BB\u02B3\u02B8\u02B7\u02C1\u02B6\u02B9\u02BC = Time.realtimeSinceStartup;
		this.\u02B2\u02BB\u02BA\u02B9\u02BA\u02B2\u02B7\u02BE\u02BB\u02BA\u02B9 = this.\u02B5\u02BE\u02B8\u02BB\u02B3\u02B8\u02B7\u02C1\u02B6\u02B9\u02BC - this.\u02B5\u02BB\u02BE\u02B7\u02B6\u02BA\u02B2\u02BA\u02B4\u02BE\u02B9;
	}

	private static List<\u02BD\u02BC\u02C0\u02BE\u02B2\u02BB\u02C0\u02B5\u02B5\u02BA\u02C1> \u02B4\u02B3\u02B9\u02C0\u02B3\u02B5\u02BC\u02B2\u02BA\u02B3\u02B6()
	{
		List<\u02BD\u02BC\u02C0\u02BE\u02B2\u02BB\u02C0\u02B5\u02B5\u02BA\u02C1> list = new List<\u02BD\u02BC\u02C0\u02BE\u02B2\u02BB\u02C0\u02B5\u02B5\u02BA\u02C1>();
		double num = 1.0 / (Calibrator.\u02B5\u02BC\u02BA\u02BC\u02BB\u02B8\u02BE\u02C0\u02B5\u02BD\u02BE / 60.0) * 4.0;
		int num2 = 0;
		double num3 = num;
		for (int i = 0; i < 12; i++)
		{
			int num4 = Calibrator.\u02B5\u02BC\u02B2\u02C0\u02B9\u02B4\u02B2\u02B6\u02B5\u02BF\u02B2[num2];
			double num5 = num / (double)num4;
			for (int j = 0; j < num4; j++)
			{
				list.Add(new \u02BD\u02BC\u02C0\u02BE\u02B2\u02BB\u02C0\u02B5\u02B5\u02BA\u02C1
				{
					\u02B2\u02B6\u02B9\u02B8\u02BF\u02BD\u02BF\u02BA\u02B9\u02C1\u02B5 = num3 + (double)j * num5
				});
			}
			num3 += num;
			if (i > 0 && i % 2 == 0)
			{
				num2++;
			}
		}
		return list;
	}

	public void \u02BF\u02BA\u02B7\u02BF\u02B6\u02B8\u02B3\u02C0\u02B3\u02B7\u02B8()
	{
		\u02BD\u02C1\u02B9\u02C0\u02B6\u02BB\u02BB\u02C0\u02BB\u02B7\u02BE.\u02B5\u02B2\u02B8\u02BC\u02B3\u02B5\u02B4\u02B7\u02B2\u02B5\u02BD();
	}

	public void \u02BE\u02B8\u02B7\u02BA\u02B9\u02C1\u02BF\u02B9\u02BD\u02BA\u02BF()
	{
		if ((double)this.\u02B2\u02BB\u02BA\u02B9\u02BA\u02B2\u02B7\u02BE\u02BB\u02BA\u02B9 < this.\u02B8\u02C1\u02B7\u02B6\u02C0\u02BD\u02BD\u02B2\u02B6\u02BA\u02B9[0].\u02B2\u02B6\u02B9\u02B8\u02BF\u02BD\u02BF\u02BA\u02B9\u02C1\u02B5 - 0.5 || (double)this.\u02B2\u02BB\u02BA\u02B9\u02BA\u02B2\u02B7\u02BE\u02BB\u02BA\u02B9 > this.\u02B8\u02C1\u02B7\u02B6\u02C0\u02BD\u02BD\u02B2\u02B6\u02BA\u02B9[this.\u02B8\u02C1\u02B7\u02B6\u02C0\u02BD\u02BD\u02B2\u02B6\u02BA\u02B9.Count - 1].\u02B2\u02B6\u02B9\u02B8\u02BF\u02BD\u02BF\u02BA\u02B9\u02C1\u02B5 + 0.5)
		{
			return;
		}
		\u02BD\u02BC\u02C0\u02BE\u02B2\u02BB\u02C0\u02B5\u02B5\u02BA\u02C1 u02BD_u02BC_u02C0_u02BE_u02B2_u02BB_u02C0_u02B5_u02B5_u02BA_u02C = this.\u02B5\u02C1\u02C0\u02C0\u02B5\u02B4\u02BF\u02B9\u02B3\u02B2\u02BE();
		float num = Math.Abs(this.\u02B2\u02BB\u02BA\u02B9\u02BA\u02B2\u02B7\u02BE\u02BB\u02BA\u02B9 - (float)u02BD_u02BC_u02C0_u02BE_u02B2_u02BB_u02C0_u02B5_u02B5_u02BA_u02C.\u02B2\u02B6\u02B9\u02B8\u02BF\u02BD\u02BF\u02BA\u02B9\u02C1\u02B5);
		if (!u02BD_u02BC_u02C0_u02BE_u02B2_u02BB_u02C0_u02B5_u02B5_u02BA_u02C.\u02BF\u02BF\u02B7\u02BE\u02B9\u02BC\u02B8\u02B7\u02C0\u02BC\u02B4 && num < 1f && this.\u02BE\u02BE\u02BA\u02B8\u02B2\u02B4\u02BF\u02B3\u02B3\u02BE\u02B8.player.GetAnyButtonDown())
		{
			u02BD_u02BC_u02C0_u02BE_u02B2_u02BB_u02C0_u02B5_u02B5_u02BA_u02C.\u02B9\u02BF\u02B3\u02B2\u02C0\u02B3\u02B9\u02B5\u02B9\u02B7\u02B4 = (double)this.\u02B2\u02BB\u02BA\u02B9\u02BA\u02B2\u02B7\u02BE\u02BB\u02BA\u02B9;
			u02BD_u02BC_u02C0_u02BE_u02B2_u02BB_u02C0_u02B5_u02B5_u02BA_u02C.\u02BF\u02BF\u02B7\u02BE\u02B9\u02BC\u02B8\u02B7\u02C0\u02BC\u02B4 = true;
			this.latencyGraph.\u02BC\u02BF\u02C1\u02BA\u02BE\u02BC\u02BD\u02BE\u02B3\u02BB\u02C1((float)((double)this.\u02B2\u02BB\u02BA\u02B9\u02BA\u02B2\u02B7\u02BE\u02BB\u02BA\u02B9 - u02BD_u02BC_u02C0_u02BE_u02B2_u02BB_u02C0_u02B5_u02B5_u02BA_u02C.\u02B2\u02B6\u02B9\u02B8\u02BF\u02BD\u02BF\u02BA\u02B9\u02C1\u02B5));
		}
	}

	public void \u02B5\u02BD\u02C1\u02B6\u02BA\u02B4\u02BD\u02BD\u02B4\u02B7\u02BF(CHPlayer \u02BE\u02B5\u02BB\u02B3\u02B7\u02B4\u02BC\u02B2\u02BB\u02B6\u02B7)
	{
		this.\u02B8\u02C1\u02B7\u02B6\u02C0\u02BD\u02BD\u02B2\u02B6\u02BA\u02B9 = Calibrator.\u02B4\u02B3\u02B9\u02C0\u02B3\u02B5\u02BC\u02B2\u02BA\u02B3\u02B6();
		this.\u02B5\u02BB\u02BE\u02B7\u02B6\u02BA\u02B2\u02BA\u02B4\u02BE\u02B9 = Time.realtimeSinceStartup;
		this.\u02B5\u02BE\u02B8\u02BB\u02B3\u02B8\u02B7\u02C1\u02B6\u02B9\u02BC = Time.realtimeSinceStartup;
		this.\u02B2\u02B9\u02B7\u02C1\u02B7\u02BB\u02BA\u02BB\u02BD\u02C0\u02BC = \u02B3\u02C0\u02B9\u02B5\u02B2\u02B5\u02BF\u02B6\u02BD\u02B4\u02BC.Video;
		this.\u02BE\u02BE\u02BA\u02B8\u02B2\u02B4\u02BF\u02B3\u02B3\u02BE\u02B8 = \u02BE\u02B5\u02BB\u02B3\u02B7\u02B4\u02BC\u02B2\u02BB\u02B6\u02B7;
		this.\u02B5\u02B2\u02B4\u02B8\u02C1\u02BE\u02B8\u02BF\u02C0\u02BB\u02B4.\u02B9\u02B4\u02BF\u02BC\u02B9\u02BA\u02B5\u02BD\u02BD\u02C1\u02B3();
		this.latencyGraph.\u02B3\u02B5\u02BC\u02B6\u02B3\u02BB\u02C1\u02BB\u02C1\u02BF\u02BC();
	}

	public void \u02B3\u02B6\u02C1\u02BB\u02B9\u02BE\u02BB\u02BC\u02BC\u02B8\u02B4(CHPlayer \u02BE\u02B5\u02BB\u02B3\u02B7\u02B4\u02BC\u02B2\u02BB\u02B6\u02B7)
	{
		this.\u02B8\u02C1\u02B7\u02B6\u02C0\u02BD\u02BD\u02B2\u02B6\u02BA\u02B9 = Calibrator.\u02B4\u02B3\u02B9\u02C0\u02B3\u02B5\u02BC\u02B2\u02BA\u02B3\u02B6();
		this.\u02B5\u02BB\u02BE\u02B7\u02B6\u02BA\u02B2\u02BA\u02B4\u02BE\u02B9 = Time.realtimeSinceStartup;
		this.\u02B5\u02BE\u02B8\u02BB\u02B3\u02B8\u02B7\u02C1\u02B6\u02B9\u02BC = Time.realtimeSinceStartup;
		this.\u02B2\u02B9\u02B7\u02C1\u02B7\u02BB\u02BA\u02BB\u02BD\u02C0\u02BC = \u02B3\u02C0\u02B9\u02B5\u02B2\u02B5\u02BF\u02B6\u02BD\u02B4\u02BC.Video;
		this.\u02BE\u02BE\u02BA\u02B8\u02B2\u02B4\u02BF\u02B3\u02B3\u02BE\u02B8 = \u02BE\u02B5\u02BB\u02B3\u02B7\u02B4\u02BC\u02B2\u02BB\u02B6\u02B7;
		this.\u02B5\u02B2\u02B4\u02B8\u02C1\u02BE\u02B8\u02BF\u02C0\u02BB\u02B4.Reset();
		this.latencyGraph.\u02C1\u02C1\u02BA\u02BC\u02BE\u02B6\u02BB\u02B2\u02BC\u02C1\u02BD();
	}

	private CHPlayer \u02B5\u02BF\u02B4\u02BA\u02B7\u02BD\u02B5\u02B7\u02B9\u02B7\u02B7()
	{
		foreach (CHPlayer chplayer in GlobalVariables.instance.playerList)
		{
			if (chplayer.\u02BC\u02BA\u02BE\u02B2\u02C0\u02BE\u02B6\u02B5\u02BC\u02B3\u02BD && chplayer.player.GetButtonDown(0))
			{
				return chplayer;
			}
		}
		return null;
	}

	public void \u02B4\u02B5\u02BD\u02BF\u02B8\u02BB\u02BF\u02B6\u02BB\u02BC\u02BD()
	{
		\u02BD\u02C1\u02B9\u02C0\u02B6\u02BB\u02BB\u02C0\u02BB\u02B7\u02BE.\u02B5\u02B2\u02B8\u02BC\u02B3\u02B5\u02B4\u02B7\u02B2\u02B5\u02BD();
	}

	public void \u02B8\u02BF\u02B6\u02B8\u02B8\u02BA\u02B4\u02C1\u02B4\u02C0\u02B7()
	{
		\u02BD\u02C1\u02B9\u02C0\u02B6\u02BB\u02BB\u02C0\u02BB\u02B7\u02BE.\u02B5\u02B2\u02B8\u02BC\u02B3\u02B5\u02B4\u02B7\u02B2\u02B5\u02BD();
	}

	private CHPlayer \u02BB\u02BF\u02B2\u02BC\u02B3\u02B7\u02C1\u02BD\u02B4\u02B6\u02BD()
	{
		foreach (CHPlayer chplayer in GlobalVariables.instance.playerList)
		{
			if (chplayer.\u02BC\u02BA\u02BE\u02B2\u02C0\u02BE\u02B6\u02B5\u02BC\u02B3\u02BD && chplayer.player.GetButtonDown(1))
			{
				return chplayer;
			}
		}
		return null;
	}

	private void \u02BB\u02B4\u02BA\u02B2\u02B8\u02B2\u02B6\u02C0\u02B8\u02BA\u02BF()
	{
		this.startText.gameObject.SetActive(false);
		int num = Mathf.CeilToInt((float)this.\u02B8\u02C1\u02B7\u02B6\u02C0\u02BD\u02BD\u02B2\u02B6\u02BA\u02B9.\u02BE\u02BE\u02B6\u02B5\u02B6\u02C0\u02B6\u02B2\u02B8\u02B5\u02B4() * 484f);
		SettingsController.videoOffset.CurrentValue = num;
		this.startText.text = string.Format("ModChart Prep", num);
		this.\u02B2\u02B9\u02B7\u02C1\u02B7\u02BB\u02BA\u02BB\u02BD\u02C0\u02BC = \u02B3\u02C0\u02B9\u02B5\u02B2\u02B5\u02BF\u02B6\u02BD\u02B4\u02BC.Intro;
	}

	public \u02BD\u02BC\u02C0\u02BE\u02B2\u02BB\u02C0\u02B5\u02B5\u02BA\u02C1 \u02B5\u02C1\u02C0\u02C0\u02B5\u02B4\u02BF\u02B9\u02B3\u02B2\u02BE()
	{
		\u02BD\u02BC\u02C0\u02BE\u02B2\u02BB\u02C0\u02B5\u02B5\u02BA\u02C1 u02BD_u02BC_u02C0_u02BE_u02B2_u02BB_u02C0_u02B5_u02B5_u02BA_u02C = null;
		float num = 100f;
		foreach (\u02BD\u02BC\u02C0\u02BE\u02B2\u02BB\u02C0\u02B5\u02B5\u02BA\u02C1 u02BD_u02BC_u02C0_u02BE_u02B2_u02BB_u02C0_u02B5_u02B5_u02BA_u02C2 in EnumerableRanges.EnumerateRange<\u02BD\u02BC\u02C0\u02BE\u02B2\u02BB\u02C0\u02B5\u02B5\u02BA\u02C1>(this.\u02B8\u02C1\u02B7\u02B6\u02C0\u02BD\u02BD\u02B2\u02B6\u02BA\u02B9, this.\u02B5\u02B2\u02B4\u02B8\u02C1\u02BE\u02B8\u02BF\u02C0\u02BB\u02B4.\u02BC\u02BB\u02B3\u02B8\u02BF\u02BF\u02B4\u02B9\u02B8\u02B6\u02B8, int.MaxValue))
		{
			float num2 = Math.Abs((float)u02BD_u02BC_u02C0_u02BE_u02B2_u02BB_u02C0_u02B5_u02B5_u02BA_u02C2.\u02B2\u02B6\u02B9\u02B8\u02BF\u02BD\u02BF\u02BA\u02B9\u02C1\u02B5 - this.\u02B2\u02BB\u02BA\u02B9\u02BA\u02B2\u02B7\u02BE\u02BB\u02BA\u02B9);
			if (num2 < num)
			{
				num = num2;
				u02BD_u02BC_u02C0_u02BE_u02B2_u02BB_u02C0_u02B5_u02B5_u02BA_u02C = u02BD_u02BC_u02C0_u02BE_u02B2_u02BB_u02C0_u02B5_u02B5_u02BA_u02C2;
			}
			else if (num2 > num)
			{
				break;
			}
		}
		return u02BD_u02BC_u02C0_u02BE_u02B2_u02BB_u02C0_u02B5_u02B5_u02BA_u02C;
	}

	private void \u02BB\u02BC\u02BD\u02B9\u02B3\u02B3\u02BE\u02B4\u02B8\u02B2\u02B2()
	{
		switch (this.\u02B2\u02B9\u02B7\u02C1\u02B7\u02BB\u02BA\u02BB\u02BD\u02C0\u02BC)
		{
		case \u02B3\u02C0\u02B9\u02B5\u02B2\u02B5\u02BF\u02B6\u02BD\u02B4\u02BC.Intro:
		{
			CHPlayer chplayer = this.\u02B3\u02C0\u02BA\u02BD\u02C0\u02C1\u02B6\u02B7\u02B5\u02B9\u02C1();
			if (chplayer != null)
			{
				this.\u02B3\u02B7\u02B9\u02B4\u02C1\u02BF\u02B3\u02B3\u02B4\u02BE\u02B9(chplayer);
				this.startText.gameObject.SetActive(false);
				return;
			}
			break;
		}
		case \u02B3\u02C0\u02B9\u02B5\u02B2\u02B5\u02BF\u02B6\u02BD\u02B4\u02BC.Audio:
			if (this.\u02C0\u02B6\u02B9\u02BA\u02B3\u02B5\u02BA\u02B9\u02B6\u02C0\u02C0)
			{
				double num = \u02BD\u02C1\u02B9\u02C0\u02B6\u02BB\u02BB\u02C0\u02BB\u02B7\u02BE.\u02B7\u02BA\u02C1\u02B5\u02B5\u02BC\u02B4\u02BB\u02BB\u02C1\u02BB();
				if (num == 1806.0)
				{
					return;
				}
				double num2 = (double)(Time.realtimeSinceStartup - this.\u02B5\u02BB\u02BE\u02B7\u02B6\u02BA\u02B2\u02BA\u02B4\u02BE\u02B9) - num;
				this.\u02B5\u02BB\u02BE\u02B7\u02B6\u02BA\u02B2\u02BA\u02B4\u02BE\u02B9 += (float)num2;
				this.\u02C0\u02B6\u02B9\u02BA\u02B3\u02B5\u02BA\u02B9\u02B6\u02C0\u02C0 = false;
			}
			this.\u02B8\u02B7\u02BE\u02B5\u02B7\u02BF\u02BC\u02BA\u02BB\u02BA\u02B6();
			this.\u02C0\u02B9\u02BA\u02B9\u02C0\u02B9\u02BB\u02B8\u02C1\u02B4\u02C1();
			this.\u02B7\u02B9\u02BB\u02BA\u02BD\u02C1\u02BD\u02BE\u02B4\u02B8\u02B4();
			if ((double)this.\u02B2\u02BB\u02BA\u02B9\u02BA\u02B2\u02B7\u02BE\u02BB\u02BA\u02B9 > this.\u02B9\u02BE\u02B9\u02B8\u02B2\u02B2\u02BE\u02BC\u02B5\u02B9\u02BC)
			{
				this.\u02B5\u02BF\u02B2\u02B5\u02BC\u02C1\u02B6\u02C1\u02B6\u02C1\u02BA();
				return;
			}
			break;
		case \u02B3\u02C0\u02B9\u02B5\u02B2\u02B5\u02BF\u02B6\u02BD\u02B4\u02BC.AudioFinished:
		{
			CHPlayer chplayer = this.\u02B5\u02BF\u02B4\u02BA\u02B7\u02BD\u02B5\u02B7\u02B9\u02B7\u02B7();
			if (chplayer != null)
			{
				this.\u02BD\u02B9\u02C1\u02BB\u02B3\u02B2\u02BD\u02C1\u02B2\u02BD\u02BC(chplayer);
				this.startText.gameObject.SetActive(true);
				return;
			}
			chplayer = this.\u02BE\u02BC\u02B7\u02BB\u02C1\u02C1\u02B4\u02B8\u02BD\u02B8\u02C1();
			if (chplayer != null)
			{
				this.\u02B5\u02BD\u02C1\u02B6\u02BA\u02B4\u02BD\u02BD\u02B4\u02B7\u02BF(chplayer);
				this.startText.gameObject.SetActive(false);
				return;
			}
			break;
		}
		case \u02B3\u02C0\u02B9\u02B5\u02B2\u02B5\u02BF\u02B6\u02BD\u02B4\u02BC.Video:
			this.\u02C0\u02B9\u02BA\u02B9\u02C0\u02B9\u02BB\u02B8\u02C1\u02B4\u02C1();
			this.\u02BE\u02B8\u02B7\u02BA\u02B9\u02C1\u02BF\u02B9\u02BD\u02BA\u02BF();
			if ((double)this.\u02B2\u02BB\u02BA\u02B9\u02BA\u02B2\u02B7\u02BE\u02BB\u02BA\u02B9 > this.\u02B9\u02BE\u02B9\u02B8\u02B2\u02B2\u02BE\u02BC\u02B5\u02B9\u02BC)
			{
				this.\u02BB\u02B6\u02C0\u02BA\u02B5\u02B6\u02B6\u02C0\u02B4\u02BA\u02B8();
			}
			this.\u02B5\u02B2\u02B4\u02B8\u02C1\u02BE\u02B8\u02BF\u02C0\u02BB\u02B4.\u02B6\u02BE\u02B4\u02C1\u02BC\u02B3\u02C1\u02BD\u02B7\u02C1\u02B9();
			return;
		case \u02B3\u02C0\u02B9\u02B5\u02B2\u02B5\u02BF\u02B6\u02BD\u02B4\u02BC.VideoFinished:
		{
			CHPlayer chplayer = this.\u02C0\u02B7\u02B5\u02B2\u02B7\u02BC\u02C1\u02BD\u02BF\u02C1\u02BA();
			if (chplayer != null)
			{
				this.\u02B5\u02BD\u02C1\u02B6\u02BA\u02B4\u02BD\u02BD\u02B4\u02B7\u02BF(chplayer);
				this.startText.gameObject.SetActive(true);
			}
			chplayer = this.\u02B8\u02B8\u02BF\u02B4\u02BC\u02B5\u02C1\u02C1\u02C1\u02B8\u02B2();
			if (chplayer != null)
			{
				GlobalVariables.instance.\u02B6\u02BC\u02B4\u02B9\u02B7\u02B4\u02BE\u02BF\u02B4\u02BE\u02B4(false);
				SceneManager.LoadScene("beat");
			}
			break;
		}
		default:
			return;
		}
	}

	private void \u02BB\u02B3\u02B5\u02BD\u02BD\u02C0\u02B4\u02C0\u02B3\u02B5\u02BC()
	{
		double num = \u02BD\u02C1\u02B9\u02C0\u02B6\u02BB\u02BB\u02C0\u02BB\u02B7\u02BE.\u02B7\u02BA\u02C1\u02B5\u02B5\u02BC\u02B4\u02BB\u02BB\u02C1\u02BB();
		double num2 = 1499.0 / (Calibrator.\u02B5\u02BC\u02BA\u02BC\u02BB\u02B8\u02BE\u02C0\u02B5\u02BD\u02BE / 1096.0);
		if (num > 1388.0)
		{
			this.startText.gameObject.SetActive(false);
			this.startText.text = string.Format("", (int)(num / num2));
		}
		if (num > num2 * 1635.0)
		{
			this.startText.gameObject.SetActive(false);
		}
	}

	public float \u02B2\u02BB\u02BA\u02B9\u02BA\u02B2\u02B7\u02BE\u02BB\u02BA\u02B9 { get; private set; }

	private CHPlayer \u02BA\u02BD\u02BC\u02B4\u02BD\u02B8\u02B8\u02B4\u02B4\u02BE\u02B6()
	{
		foreach (CHPlayer chplayer in GlobalVariables.instance.playerList)
		{
			if (chplayer.\u02BC\u02BA\u02BE\u02B2\u02C0\u02BE\u02B6\u02B5\u02BC\u02B3\u02BD && chplayer.player.GetButtonDown(1))
			{
				return chplayer;
			}
		}
		return null;
	}

	public void \u02B7\u02B2\u02BE\u02B4\u02C1\u02B7\u02BA\u02B8\u02BF\u02B2\u02BA(CHPlayer \u02BE\u02B5\u02BB\u02B3\u02B7\u02B4\u02BC\u02B2\u02BB\u02B6\u02B7)
	{
		this.\u02B8\u02C1\u02B7\u02B6\u02C0\u02BD\u02BD\u02B2\u02B6\u02BA\u02B9 = Calibrator.\u02B4\u02B3\u02B9\u02C0\u02B3\u02B5\u02BC\u02B2\u02BA\u02B3\u02B6();
		this.\u02B5\u02BB\u02BE\u02B7\u02B6\u02BA\u02B2\u02BA\u02B4\u02BE\u02B9 = Time.realtimeSinceStartup;
		this.\u02B5\u02BE\u02B8\u02BB\u02B3\u02B8\u02B7\u02C1\u02B6\u02B9\u02BC = Time.realtimeSinceStartup;
		this.\u02B2\u02B9\u02B7\u02C1\u02B7\u02BB\u02BA\u02BB\u02BD\u02C0\u02BC = \u02B3\u02C0\u02B9\u02B5\u02B2\u02B5\u02BF\u02B6\u02BD\u02B4\u02BC.Audio;
		this.\u02BE\u02BE\u02BA\u02B8\u02B2\u02B4\u02BF\u02B3\u02B3\u02BE\u02B8 = \u02BE\u02B5\u02BB\u02B3\u02B7\u02B4\u02BC\u02B2\u02BB\u02B6\u02B7;
		this.\u02B5\u02B2\u02B4\u02B8\u02C1\u02BE\u02B8\u02BF\u02C0\u02BB\u02B4.\u02B9\u02B4\u02BF\u02BC\u02B9\u02BA\u02B5\u02BD\u02BD\u02C1\u02B3();
		this.\u02C0\u02B6\u02B9\u02BA\u02B3\u02B5\u02BA\u02B9\u02B6\u02C0\u02C0 = false;
		this.latencyGraph.\u02C1\u02C1\u02BA\u02BC\u02BE\u02B6\u02BB\u02B2\u02BC\u02C1\u02BD();
		this.\u02BF\u02BA\u02B7\u02BF\u02B6\u02B8\u02B3\u02C0\u02B3\u02B7\u02B8();
	}

	private CHPlayer \u02B3\u02C0\u02BA\u02BD\u02C0\u02C1\u02B6\u02B7\u02B5\u02B9\u02C1()
	{
		foreach (CHPlayer chplayer in GlobalVariables.instance.playerList)
		{
			if (chplayer.\u02BC\u02BA\u02BE\u02B2\u02C0\u02BE\u02B6\u02B5\u02BC\u02B3\u02BD && chplayer.player.GetAnyButtonDown())
			{
				return chplayer;
			}
		}
		return null;
	}

	private void \u02BB\u02B6\u02C0\u02BA\u02B5\u02B6\u02B6\u02C0\u02B4\u02BA\u02B8()
	{
		this.startText.gameObject.SetActive(true);
		int num = Mathf.CeilToInt((float)this.\u02B8\u02C1\u02B7\u02B6\u02C0\u02BD\u02BD\u02B2\u02B6\u02BA\u02B9.\u02BE\u02BE\u02B6\u02B5\u02B6\u02C0\u02B6\u02B2\u02B8\u02B5\u02B4() * 1000f);
		SettingsController.videoOffset.CurrentValue = num;
		this.startText.text = string.Format("Video Cal: {0} ms\npress green to return to the main menu, or red to try again!", num);
		this.\u02B2\u02B9\u02B7\u02C1\u02B7\u02BB\u02BA\u02BB\u02BD\u02C0\u02BC = \u02B3\u02C0\u02B9\u02B5\u02B2\u02B5\u02BF\u02B6\u02BD\u02B4\u02BC.VideoFinished;
	}

	private CHPlayer \u02C0\u02B7\u02B5\u02B2\u02B7\u02BC\u02C1\u02BD\u02BF\u02C1\u02BA()
	{
		foreach (CHPlayer chplayer in GlobalVariables.instance.playerList)
		{
			if (chplayer.\u02BC\u02BA\u02BE\u02B2\u02C0\u02BE\u02B6\u02B5\u02BC\u02B3\u02BD && chplayer.player.GetButtonDown(1))
			{
				return chplayer;
			}
		}
		return null;
	}

	private CHPlayer \u02B8\u02B8\u02BF\u02B4\u02BC\u02B5\u02C1\u02C1\u02C1\u02B8\u02B2()
	{
		foreach (CHPlayer chplayer in GlobalVariables.instance.playerList)
		{
			if (chplayer.\u02BC\u02BA\u02BE\u02B2\u02C0\u02BE\u02B6\u02B5\u02BC\u02B3\u02BD && chplayer.player.GetButtonDown(0))
			{
				return chplayer;
			}
		}
		return null;
	}

	public void \u02BD\u02B9\u02C1\u02BB\u02B3\u02B2\u02BD\u02C1\u02B2\u02BD\u02BC(CHPlayer \u02BE\u02B5\u02BB\u02B3\u02B7\u02B4\u02BC\u02B2\u02BB\u02B6\u02B7)
	{
		this.\u02B8\u02C1\u02B7\u02B6\u02C0\u02BD\u02BD\u02B2\u02B6\u02BA\u02B9 = Calibrator.\u02B4\u02B3\u02B9\u02C0\u02B3\u02B5\u02BC\u02B2\u02BA\u02B3\u02B6();
		this.\u02B5\u02BB\u02BE\u02B7\u02B6\u02BA\u02B2\u02BA\u02B4\u02BE\u02B9 = Time.realtimeSinceStartup;
		this.\u02B5\u02BE\u02B8\u02BB\u02B3\u02B8\u02B7\u02C1\u02B6\u02B9\u02BC = Time.realtimeSinceStartup;
		this.\u02B2\u02B9\u02B7\u02C1\u02B7\u02BB\u02BA\u02BB\u02BD\u02C0\u02BC = \u02B3\u02C0\u02B9\u02B5\u02B2\u02B5\u02BF\u02B6\u02BD\u02B4\u02BC.Audio;
		this.\u02BE\u02BE\u02BA\u02B8\u02B2\u02B4\u02BF\u02B3\u02B3\u02BE\u02B8 = \u02BE\u02B5\u02BB\u02B3\u02B7\u02B4\u02BC\u02B2\u02BB\u02B6\u02B7;
		this.\u02B5\u02B2\u02B4\u02B8\u02C1\u02BE\u02B8\u02BF\u02C0\u02BB\u02B4.Reset();
		this.\u02C0\u02B6\u02B9\u02BA\u02B3\u02B5\u02BA\u02B9\u02B6\u02C0\u02C0 = true;
		this.latencyGraph.\u02C1\u02C1\u02BA\u02BC\u02BE\u02B6\u02BB\u02B2\u02BC\u02C1\u02BD();
		this.\u02B8\u02BF\u02B6\u02B8\u02B8\u02BA\u02B4\u02C1\u02B4\u02C0\u02B7();
	}

	private void \u02B8\u02BA\u02B5\u02BE\u02BC\u02C1\u02BE\u02B3\u02B3\u02B2\u02BC(float \u02B6\u02B2\u02B5\u02BB\u02C1\u02BB\u02BA\u02B4\u02BF\u02BA\u02B5)
	{
		this.<\u02BB\u02BC\u02BE\u02B4\u02B8\u02B7\u02B6\u02BC\u02B9\u02B7\u02C1>k__BackingField = \u02B6\u02B2\u02B5\u02BB\u02C1\u02BB\u02BA\u02B4\u02BF\u02BA\u02B5;
	}

	private void Update()
	{
		switch (this.\u02B2\u02B9\u02B7\u02C1\u02B7\u02BB\u02BA\u02BB\u02BD\u02C0\u02BC)
		{
		case \u02B3\u02C0\u02B9\u02B5\u02B2\u02B5\u02BF\u02B6\u02BD\u02B4\u02BC.Intro:
		{
			CHPlayer chplayer = this.\u02B3\u02C0\u02BA\u02BD\u02C0\u02C1\u02B6\u02B7\u02B5\u02B9\u02C1();
			if (chplayer != null)
			{
				this.\u02BD\u02B9\u02C1\u02BB\u02B3\u02B2\u02BD\u02C1\u02B2\u02BD\u02BC(chplayer);
				this.startText.gameObject.SetActive(false);
				return;
			}
			break;
		}
		case \u02B3\u02C0\u02B9\u02B5\u02B2\u02B5\u02BF\u02B6\u02BD\u02B4\u02BC.Audio:
			if (this.\u02C0\u02B6\u02B9\u02BA\u02B3\u02B5\u02BA\u02B9\u02B6\u02C0\u02C0)
			{
				double num = \u02BD\u02C1\u02B9\u02C0\u02B6\u02BB\u02BB\u02C0\u02BB\u02B7\u02BE.\u02B7\u02BA\u02C1\u02B5\u02B5\u02BC\u02B4\u02BB\u02BB\u02C1\u02BB();
				if (num == 0.0)
				{
					return;
				}
				double num2 = (double)(Time.realtimeSinceStartup - this.\u02B5\u02BB\u02BE\u02B7\u02B6\u02BA\u02B2\u02BA\u02B4\u02BE\u02B9) - num;
				this.\u02B5\u02BB\u02BE\u02B7\u02B6\u02BA\u02B2\u02BA\u02B4\u02BE\u02B9 += (float)num2;
				this.\u02C0\u02B6\u02B9\u02BA\u02B3\u02B5\u02BA\u02B9\u02B6\u02C0\u02C0 = false;
			}
			this.\u02B8\u02B7\u02BE\u02B5\u02B7\u02BF\u02BC\u02BA\u02BB\u02BA\u02B6();
			this.\u02C0\u02B9\u02BA\u02B9\u02C0\u02B9\u02BB\u02B8\u02C1\u02B4\u02C1();
			this.\u02BE\u02B8\u02B7\u02BA\u02B9\u02C1\u02BF\u02B9\u02BD\u02BA\u02BF();
			if ((double)this.\u02B2\u02BB\u02BA\u02B9\u02BA\u02B2\u02B7\u02BE\u02BB\u02BA\u02B9 > this.\u02B9\u02BE\u02B9\u02B8\u02B2\u02B2\u02BE\u02BC\u02B5\u02B9\u02BC)
			{
				this.\u02B5\u02BF\u02B2\u02B5\u02BC\u02C1\u02B6\u02C1\u02B6\u02C1\u02BA();
				return;
			}
			break;
		case \u02B3\u02C0\u02B9\u02B5\u02B2\u02B5\u02BF\u02B6\u02BD\u02B4\u02BC.AudioFinished:
		{
			CHPlayer chplayer = this.\u02C0\u02B7\u02B5\u02B2\u02B7\u02BC\u02C1\u02BD\u02BF\u02C1\u02BA();
			if (chplayer != null)
			{
				this.\u02BD\u02B9\u02C1\u02BB\u02B3\u02B2\u02BD\u02C1\u02B2\u02BD\u02BC(chplayer);
				this.startText.gameObject.SetActive(false);
				return;
			}
			chplayer = this.\u02B8\u02B8\u02BF\u02B4\u02BC\u02B5\u02C1\u02C1\u02C1\u02B8\u02B2();
			if (chplayer != null)
			{
				this.\u02B3\u02B6\u02C1\u02BB\u02B9\u02BE\u02BB\u02BC\u02BC\u02B8\u02B4(chplayer);
				this.startText.gameObject.SetActive(false);
				return;
			}
			break;
		}
		case \u02B3\u02C0\u02B9\u02B5\u02B2\u02B5\u02BF\u02B6\u02BD\u02B4\u02BC.Video:
			this.\u02C0\u02B9\u02BA\u02B9\u02C0\u02B9\u02BB\u02B8\u02C1\u02B4\u02C1();
			this.\u02BE\u02B8\u02B7\u02BA\u02B9\u02C1\u02BF\u02B9\u02BD\u02BA\u02BF();
			if ((double)this.\u02B2\u02BB\u02BA\u02B9\u02BA\u02B2\u02B7\u02BE\u02BB\u02BA\u02B9 > this.\u02B9\u02BE\u02B9\u02B8\u02B2\u02B2\u02BE\u02BC\u02B5\u02B9\u02BC)
			{
				this.\u02BB\u02B6\u02C0\u02BA\u02B5\u02B6\u02B6\u02C0\u02B4\u02BA\u02B8();
			}
			this.\u02B5\u02B2\u02B4\u02B8\u02C1\u02BE\u02B8\u02BF\u02C0\u02BB\u02B4.\u02B6\u02BE\u02B4\u02C1\u02BC\u02B3\u02C1\u02BD\u02B7\u02C1\u02B9();
			return;
		case \u02B3\u02C0\u02B9\u02B5\u02B2\u02B5\u02BF\u02B6\u02BD\u02B4\u02BC.VideoFinished:
		{
			CHPlayer chplayer = this.\u02C0\u02B7\u02B5\u02B2\u02B7\u02BC\u02C1\u02BD\u02BF\u02C1\u02BA();
			if (chplayer != null)
			{
				this.\u02B3\u02B6\u02C1\u02BB\u02B9\u02BE\u02BB\u02BC\u02BC\u02B8\u02B4(chplayer);
				this.startText.gameObject.SetActive(false);
			}
			chplayer = this.\u02B8\u02B8\u02BF\u02B4\u02BC\u02B5\u02C1\u02C1\u02C1\u02B8\u02B2();
			if (chplayer != null)
			{
				GlobalVariables.instance.\u02B6\u02BC\u02B4\u02B9\u02B7\u02B4\u02BE\u02BF\u02B4\u02BE\u02B4(true);
				SceneManager.LoadScene("Main Menu");
			}
			break;
		}
		default:
			return;
		}
	}

	private void \u02B5\u02B9\u02B7\u02B7\u02B6\u02B5\u02BC\u02BA\u02B4\u02B2\u02B4()
	{
		switch (this.\u02B2\u02B9\u02B7\u02C1\u02B7\u02BB\u02BA\u02BB\u02BD\u02C0\u02BC)
		{
		case \u02B3\u02C0\u02B9\u02B5\u02B2\u02B5\u02BF\u02B6\u02BD\u02B4\u02BC.Intro:
		{
			CHPlayer chplayer = this.\u02B3\u02C0\u02BA\u02BD\u02C0\u02C1\u02B6\u02B7\u02B5\u02B9\u02C1();
			if (chplayer != null)
			{
				this.\u02B7\u02B2\u02BE\u02B4\u02C1\u02B7\u02BA\u02B8\u02BF\u02B2\u02BA(chplayer);
				this.startText.gameObject.SetActive(true);
				return;
			}
			break;
		}
		case \u02B3\u02C0\u02B9\u02B5\u02B2\u02B5\u02BF\u02B6\u02BD\u02B4\u02BC.Audio:
			if (this.\u02C0\u02B6\u02B9\u02BA\u02B3\u02B5\u02BA\u02B9\u02B6\u02C0\u02C0)
			{
				double num = \u02BD\u02C1\u02B9\u02C0\u02B6\u02BB\u02BB\u02C0\u02BB\u02B7\u02BE.\u02B7\u02BA\u02C1\u02B5\u02B5\u02BC\u02B4\u02BB\u02BB\u02C1\u02BB();
				if (num == 857.0)
				{
					return;
				}
				double num2 = (double)(Time.realtimeSinceStartup - this.\u02B5\u02BB\u02BE\u02B7\u02B6\u02BA\u02B2\u02BA\u02B4\u02BE\u02B9) - num;
				this.\u02B5\u02BB\u02BE\u02B7\u02B6\u02BA\u02B2\u02BA\u02B4\u02BE\u02B9 += (float)num2;
				this.\u02C0\u02B6\u02B9\u02BA\u02B3\u02B5\u02BA\u02B9\u02B6\u02C0\u02C0 = true;
			}
			this.\u02BB\u02B3\u02B5\u02BD\u02BD\u02C0\u02B4\u02C0\u02B3\u02B5\u02BC();
			this.\u02C0\u02B9\u02BA\u02B9\u02C0\u02B9\u02BB\u02B8\u02C1\u02B4\u02C1();
			this.\u02BE\u02B8\u02B7\u02BA\u02B9\u02C1\u02BF\u02B9\u02BD\u02BA\u02BF();
			if ((double)this.\u02B2\u02BB\u02BA\u02B9\u02BA\u02B2\u02B7\u02BE\u02BB\u02BA\u02B9 > this.\u02B9\u02BE\u02B9\u02B8\u02B2\u02B2\u02BE\u02BC\u02B5\u02B9\u02BC)
			{
				this.\u02B5\u02BF\u02B2\u02B5\u02BC\u02C1\u02B6\u02C1\u02B6\u02C1\u02BA();
				return;
			}
			break;
		case \u02B3\u02C0\u02B9\u02B5\u02B2\u02B5\u02BF\u02B6\u02BD\u02B4\u02BC.AudioFinished:
		{
			CHPlayer chplayer = this.\u02B5\u02BF\u02B4\u02BA\u02B7\u02BD\u02B5\u02B7\u02B9\u02B7\u02B7();
			if (chplayer != null)
			{
				this.\u02BD\u02B9\u02C1\u02BB\u02B3\u02B2\u02BD\u02C1\u02B2\u02BD\u02BC(chplayer);
				this.startText.gameObject.SetActive(true);
				return;
			}
			chplayer = this.\u02B8\u02B8\u02BF\u02B4\u02BC\u02B5\u02C1\u02C1\u02C1\u02B8\u02B2();
			if (chplayer != null)
			{
				this.\u02BC\u02BC\u02B8\u02B3\u02B2\u02B9\u02BA\u02B8\u02B3\u02B5\u02BD(chplayer);
				this.startText.gameObject.SetActive(false);
				return;
			}
			break;
		}
		case \u02B3\u02C0\u02B9\u02B5\u02B2\u02B5\u02BF\u02B6\u02BD\u02B4\u02BC.Video:
			this.\u02C0\u02B9\u02BA\u02B9\u02C0\u02B9\u02BB\u02B8\u02C1\u02B4\u02C1();
			this.\u02BE\u02B8\u02B7\u02BA\u02B9\u02C1\u02BF\u02B9\u02BD\u02BA\u02BF();
			if ((double)this.\u02B2\u02BB\u02BA\u02B9\u02BA\u02B2\u02B7\u02BE\u02BB\u02BA\u02B9 > this.\u02B9\u02BE\u02B9\u02B8\u02B2\u02B2\u02BE\u02BC\u02B5\u02B9\u02BC)
			{
				this.\u02BB\u02B4\u02BA\u02B2\u02B8\u02B2\u02B6\u02C0\u02B8\u02BA\u02BF();
			}
			this.\u02B5\u02B2\u02B4\u02B8\u02C1\u02BE\u02B8\u02BF\u02C0\u02BB\u02B4.\u02B6\u02BE\u02B4\u02C1\u02BC\u02B3\u02C1\u02BD\u02B7\u02C1\u02B9();
			return;
		case \u02B3\u02C0\u02B9\u02B5\u02B2\u02B5\u02BF\u02B6\u02BD\u02B4\u02BC.VideoFinished:
		{
			CHPlayer chplayer = this.\u02BB\u02BF\u02B2\u02BC\u02B3\u02B7\u02C1\u02BD\u02B4\u02B6\u02BD();
			if (chplayer != null)
			{
				this.\u02B5\u02BD\u02C1\u02B6\u02BA\u02B4\u02BD\u02BD\u02B4\u02B7\u02BF(chplayer);
				this.startText.gameObject.SetActive(true);
			}
			chplayer = this.\u02BE\u02BC\u02B7\u02BB\u02C1\u02C1\u02B4\u02B8\u02BD\u02B8\u02C1();
			if (chplayer != null)
			{
				GlobalVariables.instance.\u02B2\u02BE\u02BE\u02B6\u02B5\u02BB\u02C0\u02C0\u02B6\u02C1\u02B8(true);
				SceneManager.LoadScene("song");
			}
			break;
		}
		default:
			return;
		}
	}

	public void \u02B7\u02B9\u02BB\u02BA\u02BD\u02C1\u02BD\u02BE\u02B4\u02B8\u02B4()
	{
		if ((double)this.\u02B2\u02BB\u02BA\u02B9\u02BA\u02B2\u02B7\u02BE\u02BB\u02BA\u02B9 < this.\u02B8\u02C1\u02B7\u02B6\u02C0\u02BD\u02BD\u02B2\u02B6\u02BA\u02B9[1].\u02B2\u02B6\u02B9\u02B8\u02BF\u02BD\u02BF\u02BA\u02B9\u02C1\u02B5 - 1326.0 || (double)this.\u02B2\u02BB\u02BA\u02B9\u02BA\u02B2\u02B7\u02BE\u02BB\u02BA\u02B9 > this.\u02B8\u02C1\u02B7\u02B6\u02C0\u02BD\u02BD\u02B2\u02B6\u02BA\u02B9[this.\u02B8\u02C1\u02B7\u02B6\u02C0\u02BD\u02BD\u02B2\u02B6\u02BA\u02B9.Count - 0].\u02B2\u02B6\u02B9\u02B8\u02BF\u02BD\u02BF\u02BA\u02B9\u02C1\u02B5 + 861.0)
		{
			return;
		}
		\u02BD\u02BC\u02C0\u02BE\u02B2\u02BB\u02C0\u02B5\u02B5\u02BA\u02C1 u02BD_u02BC_u02C0_u02BE_u02B2_u02BB_u02C0_u02B5_u02B5_u02BA_u02C = this.\u02B5\u02C1\u02C0\u02C0\u02B5\u02B4\u02BF\u02B9\u02B3\u02B2\u02BE();
		float num = Math.Abs(this.\u02B2\u02BB\u02BA\u02B9\u02BA\u02B2\u02B7\u02BE\u02BB\u02BA\u02B9 - (float)u02BD_u02BC_u02C0_u02BE_u02B2_u02BB_u02C0_u02B5_u02B5_u02BA_u02C.\u02B2\u02B6\u02B9\u02B8\u02BF\u02BD\u02BF\u02BA\u02B9\u02C1\u02B5);
		if (!u02BD_u02BC_u02C0_u02BE_u02B2_u02BB_u02C0_u02B5_u02B5_u02BA_u02C.\u02BF\u02BF\u02B7\u02BE\u02B9\u02BC\u02B8\u02B7\u02C0\u02BC\u02B4 && num < 1784f && this.\u02BE\u02BE\u02BA\u02B8\u02B2\u02B4\u02BF\u02B3\u02B3\u02BE\u02B8.player.GetAnyButtonDown())
		{
			u02BD_u02BC_u02C0_u02BE_u02B2_u02BB_u02C0_u02B5_u02B5_u02BA_u02C.\u02B9\u02BF\u02B3\u02B2\u02C0\u02B3\u02B9\u02B5\u02B9\u02B7\u02B4 = (double)this.\u02B2\u02BB\u02BA\u02B9\u02BA\u02B2\u02B7\u02BE\u02BB\u02BA\u02B9;
			u02BD_u02BC_u02C0_u02BE_u02B2_u02BB_u02C0_u02B5_u02B5_u02BA_u02C.\u02BF\u02BF\u02B7\u02BE\u02B9\u02BC\u02B8\u02B7\u02C0\u02BC\u02B4 = true;
			this.latencyGraph.\u02B8\u02B5\u02BA\u02BE\u02BD\u02BF\u02BD\u02B6\u02B6\u02B8\u02C1((float)((double)this.\u02B2\u02BB\u02BA\u02B9\u02BA\u02B2\u02B7\u02BE\u02BB\u02BA\u02B9 - u02BD_u02BC_u02C0_u02BE_u02B2_u02BB_u02C0_u02B5_u02B5_u02BA_u02C.\u02B2\u02B6\u02B9\u02B8\u02BF\u02BD\u02BF\u02BA\u02B9\u02C1\u02B5));
		}
	}

	private void \u02B5\u02BF\u02B2\u02B5\u02BC\u02C1\u02B6\u02C1\u02B6\u02C1\u02BA()
	{
		this.startText.gameObject.SetActive(true);
		int num = Mathf.CeilToInt((float)this.\u02B8\u02C1\u02B7\u02B6\u02C0\u02BD\u02BD\u02B2\u02B6\u02BA\u02B9.\u02BE\u02BE\u02B6\u02B5\u02B6\u02C0\u02B6\u02B2\u02B8\u02B5\u02B4() * 1000f);
		this.startText.text = string.Format("Audio Cal: {0} ms\npress green to calibrate video, or red to try again!", num);
		SettingsController.audioOffset.CurrentValue = Mathf.CeilToInt((float)this.\u02B8\u02C1\u02B7\u02B6\u02C0\u02BD\u02BD\u02B2\u02B6\u02BA\u02B9.\u02BE\u02BE\u02B6\u02B5\u02B6\u02C0\u02B6\u02B2\u02B8\u02B5\u02B4() * 1000f);
		\u02BD\u02C1\u02B9\u02C0\u02B6\u02BB\u02BB\u02C0\u02BB\u02B7\u02BE.\u02BF\u02BD\u02B6\u02B9\u02C0\u02B7\u02B6\u02B7\u02BD\u02B8\u02B6();
		this.\u02B2\u02B9\u02B7\u02C1\u02B7\u02BB\u02BA\u02BB\u02BD\u02C0\u02BC = \u02B3\u02C0\u02B9\u02B5\u02B2\u02B5\u02BF\u02B6\u02BD\u02B4\u02BC.AudioFinished;
	}

	[SerializeField]
	private Transform strikeline;

	[SerializeField]
	private TextMeshProUGUI startText;

	[SerializeField]
	private LatencySpreadDisplay latencyGraph;

	private static double \u02B5\u02BC\u02BA\u02BC\u02BB\u02B8\u02BE\u02C0\u02B5\u02BD\u02BE = 120.0;

	private static int[] \u02B5\u02BC\u02B2\u02C0\u02B9\u02B4\u02B2\u02B6\u02B5\u02BF\u02B2 = new int[] { 4, 4, 4, 4, 4, 4 };

	private float \u02B5\u02BB\u02BE\u02B7\u02B6\u02BA\u02B2\u02BA\u02B4\u02BE\u02B9;

	private float \u02B5\u02BE\u02B8\u02BB\u02B3\u02B8\u02B7\u02C1\u02B6\u02B9\u02BC;

	private \u02B3\u02C0\u02B9\u02B5\u02B2\u02B5\u02BF\u02B6\u02BD\u02B4\u02BC \u02B2\u02B9\u02B7\u02C1\u02B7\u02BB\u02BA\u02BB\u02BD\u02C0\u02BC;

	private CHPlayer \u02BE\u02B5\u02BB\u02B3\u02B7\u02B4\u02BC\u02B2\u02BB\u02B6\u02B7;

	private CHPlayer \u02BE\u02BE\u02BA\u02B8\u02B2\u02B4\u02BF\u02B3\u02B3\u02BE\u02B8;

	private bool \u02C0\u02B6\u02B9\u02BA\u02B3\u02B5\u02BA\u02B9\u02B6\u02C0\u02C0;

	private double \u02B9\u02BE\u02B9\u02B8\u02B2\u02B2\u02BE\u02BC\u02B5\u02B9\u02BC;

	private CalVideoRenderer \u02B5\u02B2\u02B4\u02B8\u02C1\u02BE\u02B8\u02BF\u02C0\u02BB\u02B4;
}
